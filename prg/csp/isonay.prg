procedure isonaylc_alias=alias()set near onIF not lc_ALIAS='TPOMIN'    if not lc_alias='CSP' or lc_alias='DRGTPT'     wait window nowait lc_Alias+' can not be changed'     RETURN   endifENDIFif lc_alias='CSP' or lc_alias='DRGTPT'  select csp  set relation to  set skip toendifon key label ctrl+B do apu2lc_apuik=.t.set filter todo while lc_apuik  DEFINE WINDOW apuikk FROM 1,1 TO max_y, max_x/2 FONT  max_foty,  max_fosi  ACTIVATE WINDOW apuikk  wait window '[CTRL][B] - change current record, [Ctrl][W] - return to basic window' nowait  if lc_alias='CSP' or lc_alias='DRGTPT'    select drgtpt    seek csp.code    if not found()      set order to code      seek csp.code    endif  endif  set filter to   BROWSE noedit nodelete   set filter to valid  if lastkey()=23    exit  endifenddorelease window apuikkselect cspset relation to code into drgtptset skip to drgtptif lc_alias='DRGTPT'  select tpominelse  select cspendifdo cspnayttoon key label ctrl+B do isonayreturnprocedure apu2lc_recno=recno()set filter to recno()=lc_recnoeditwait window 'Select N - no changes or Y - changes'if not (lastkey()=110 or lastkey()=78)  replace chdate with date()endifset filter torelease window apuikkreturn