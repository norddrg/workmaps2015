Procedure raporttiselect anallc_print='/data/drganal/raportti.txt'set printer to (lc_print)set printer ongoto topdo while not eof()  ? '------------------------'  ? 'Age :'+str(ika,3)+ ' yrs'  do case  case sex='F' or sex='2'    ? 'Female'  case sex='M' or sex='1'    ? 'Male'  otherwise    ? 'Unknown sex'  endcase  if death     ? 'Death during this period'  endif  if lama    ? 'Left against medical advice'  endif  if rem    ? 'Remitted to acute care in an other hospital'  endif  if not death and not lama and not rem    ? 'Discharged normally'  endif  if oir1<>' '    if syy1='*'      ? oir1+'*'+ syy1    else      ? oir1    endif    do dgnim with oir1, syy1  endif  if oir2<>' '    if syy2='*'      ? oir2+'*'+ syy2    else      ? oir2    endif    do dgnim with oir2, syy2  endif  if oir3<>' '    if syy3='*'      ? oir3+'*'+ syy3    else      ? oir3    endif    do dgnim with oir3, syy3  endif  if oir4<>' '    if syy4='*'      ? oir4+'*'+ syy4    else      ? oir4    endif    do dgnim with oir4, syy4  endif  if oir5<>' '    if syy5='*'      ? oir5+'*'+ syy5    else      ? oir5    endif    do dgnim with oir5, syy5  endif  if oir6<>' '    if syy6='*'      ? oir6+'*'+ syy6    else      ? oir6    endif    do dgnim with oir6, syy6  endif  if oir7<>' '    if syy7='*'      ? oir7+'*'+ syy7    else      ? oir7    endif    do dgnim with oir7, syy7  endif  if oir8<>' '    if syy8='*'      ? oir8+'*'+ syy8    else      ? oir8    endif    do dgnim with oir8, syy8  endif  if oir9<>' '    if syy9='*'      ? oir9+'*'+ syy9    else      ? oir9    endif    do dgnim with oir9, syy9  endif  if tp1<>' '    ? tp1    do tpnim with tp1  endif  if tp2<>' '    ? tp2    do tpnim with tp2  endif  if tp3<>' '    ? tp3    do tpnim with tp3  endif  if tp4<>' '    ? tp4    do tpnim with tp4  endif  if tp5<>' '    ? tp5    do tpnim with tp5  endif  if tp6<>' '    ? tp6    do tpnim with tp6  endif  if tp7<>' '    ? tp7    do tpnim with tp7  endif  if tp8<>' '    ? tp8    do tpnim with tp8  endif  if tp9<>' '    ? tp9    do tpnim with tp9  endif  ? mdc    select mdc  seek anal.mdc  if found()    do case    case p_kieli='F'      ?? trim(finish) at 10    otherwise      ?? trim(english) at 10    endcase  else    ?? 'No MDC'  endif  select anal  ? dgkat  select dgkat  seek SUBSTR(anal.dgkat,1,2)+SUBSTR(anal.dgkat,4,2)  if found()    do case    case p_kieli='F'      ?? trim(finish) at 10    otherwise      ?? trim(english) at 10    endcase  else    ?? 'No diagnostic category'  endif  select anal  ? 'Properties of principal dg: '+ pdgomin  ? 'Dg properties: '+trim(dgomin)  ? 'Proc properties: '+trim(tpomin)  ? 'Komplication categories: '+trim(kompkat)  if kompl    ? 'Complicated'  else    ? 'Uncomplicated'  endif  if or    ? 'Operation room procedures'  else    ? 'No OR procedures'  endif  ?'DRG-group: '  ?? drg at 30  select drgnames  seek anal.drg  if found()    do case    case p_kieli='F'      ?? trim(finish) at 34    otherwise       ?? trim(english) at 34    endcase  endif  select anal  ? 'External DRG-group: '  ?? drg_ext at 30  select drgnames  seek anal.drg_ext  if found()    do case    case p_kieli='F'      ?? trim(finish) at 34    otherwise       ?? trim(english) at 34    endcase  endif  select anal  ? 'Second external DRG-group: '  ?? drg_ext2 at 30  select drgnames  seek anal.drg_ext2  if found()    do case    case p_kieli='F'      ?? trim(finish)at 34    otherwise       ?? trim(english) at 34    endcase  endif    select anal  ? 'Comment: '  if len(trim(comment))>0    ? trim(comment)  else     ? '---'  endif  select anal  skipenddoset printer offset printer todo analnaytreturnprocedure dgnimparameters dgn_oir, dgn_syyselect icd_10seek dgn_oirif found()  dgn_nimi=textelse  dgn_nimi='???'endifif ast='*'  if dgn_syy=' '    dgn_nimi=substr(dgn_nimi,1,100)+'; ???'  else   seek dgn_oir+dgn_syy   if found()     dgn_nimi=text   else     seek dgn_syy     if found()        dgn_nimi=substr(dgn_nimi,1,50)+'; '+text     else        dgn_nimi=substr(dgn_nimi,1,100)+'; ???'     endif   endif  endifendif?? trim(dgn_nimi) at 20select analreturnprocedure tpnimparameters tpn_tpselect ncsp_enseek trim(tpn_tp)if found()  do case  case p_kieli='E'     tpn_nimi=english  otherwise     tpn_nimi=text  endcaseelse  tpn_nimi='???'endif?? trim(tpn_nimi) at 20select analreturn